{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"dashboard-container\"\n};\nconst _hoisted_2 = {\n  class: \"dashboard-header\"\n};\nconst _hoisted_3 = {\n  class: \"dashboard-main\"\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  key: 1\n};\nconst _hoisted_6 = {\n  class: \"appointments-list\"\n};\nconst _hoisted_7 = {\n  key: 0\n};\nconst _hoisted_8 = {\n  class: \"app-info\"\n};\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"app-actions\"\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AppointmentForm = _resolveComponent(\"AppointmentForm\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"h1\", null, \"Minha Cl√≠nica\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.doLogout && $options.doLogout(...args))\n  }, \"Sair\")]), _createElementVNode(\"main\", _hoisted_3, [$data.userRole === 'secretario' ? (_openBlock(), _createElementBlock(\"h2\", _hoisted_4, \"Painel Administrativo - Agendamentos\")) : (_openBlock(), _createElementBlock(\"h2\", _hoisted_5, \"Meus Agendamentos\")), _createVNode(_component_AppointmentForm, {\n    onNewAppointment: $options.fetchAppointments\n  }, null, 8 /* PROPS */, [\"onNewAppointment\"]), _createElementVNode(\"div\", _hoisted_6, [_cache[8] || (_cache[8] = _createElementVNode(\"h3\", null, \"Lista de Agendamentos\", -1 /* CACHED */)), $data.appointments.length > 0 ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.appointments, app => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: app._id\n    }, [_createElementVNode(\"div\", _hoisted_8, [$data.userRole === 'secretario' && app.pacienteId ? (_openBlock(), _createElementBlock(\"strong\", _hoisted_9, [_createTextVNode(\"Paciente: \" + _toDisplayString(app.pacienteId.nome), 1 /* TEXT */), _cache[2] || (_cache[2] = _createElementVNode(\"br\", null, null, -1 /* CACHED */))])) : _createCommentVNode(\"v-if\", true), _cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Data:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(new Date(app.data).toLocaleString('pt-BR', {\n      dateStyle: 'short',\n      timeStyle: 'short'\n    })) + \" \", 1 /* TEXT */), _cache[4] || (_cache[4] = _createElementVNode(\"br\", null, null, -1 /* CACHED */)), _cache[5] || (_cache[5] = _createElementVNode(\"strong\", null, \"Descri√ß√£o:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(app.descricao) + \" \", 1 /* TEXT */), _cache[6] || (_cache[6] = _createElementVNode(\"br\", null, null, -1 /* CACHED */)), _cache[7] || (_cache[7] = _createElementVNode(\"strong\", null, \"Previs√£o:\", -1 /* CACHED */)), _createTextVNode(\" üå°Ô∏è \" + _toDisplayString(app.previsaoDoTempo), 1 /* TEXT */)]), $data.userRole === 'secretario' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n      onClick: $event => $options.deleteAppointment(app._id),\n      class: \"action-btn delete-btn\"\n    }, \"Excluir\", 8 /* PROPS */, _hoisted_11)])) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_12, \"Nenhum agendamento encontrado.\"))])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","args","$options","doLogout","_hoisted_3","$data","userRole","_hoisted_4","_hoisted_5","_createVNode","_component_AppointmentForm","onNewAppointment","fetchAppointments","_hoisted_6","appointments","length","_hoisted_7","_Fragment","_renderList","app","key","_id","_hoisted_8","pacienteId","_hoisted_9","_toDisplayString","nome","Date","data","toLocaleString","dateStyle","timeStyle","descricao","previsaoDoTempo","_hoisted_10","$event","deleteAppointment","_hoisted_11","_hoisted_12"],"sources":["C:\\Users\\rafae\\OneDrive\\Desktop\\clinica-inteligente\\frontend\\src\\views\\DashboardView.vue"],"sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <header class=\"dashboard-header\">\r\n      <h1>Minha Cl√≠nica</h1>\r\n      <button @click=\"doLogout\">Sair</button>\r\n    </header>\r\n    <main class=\"dashboard-main\">\r\n      <h2 v-if=\"userRole === 'secretario'\">Painel Administrativo - Agendamentos</h2>\r\n      <h2 v-else>Meus Agendamentos</h2>\r\n      \r\n      <AppointmentForm @new-appointment=\"fetchAppointments\" />\r\n\r\n      <div class=\"appointments-list\">\r\n        <h3>Lista de Agendamentos</h3>\r\n        <ul v-if=\"appointments.length > 0\">\r\n          <li v-for=\"app in appointments\" :key=\"app._id\">\r\n            <div class=\"app-info\">\r\n              <strong v-if=\"userRole === 'secretario' && app.pacienteId\">Paciente: {{ app.pacienteId.nome }}<br></strong>\r\n              <strong>Data:</strong> {{ new Date(app.data).toLocaleString('pt-BR', { dateStyle: 'short', timeStyle: 'short' }) }} <br>\r\n              <strong>Descri√ß√£o:</strong> {{ app.descricao }} <br>\r\n              <strong>Previs√£o:</strong> üå°Ô∏è {{ app.previsaoDoTempo }}\r\n            </div>\r\n            <div class=\"app-actions\" v-if=\"userRole === 'secretario'\">\r\n              <button @click=\"deleteAppointment(app._id)\" class=\"action-btn delete-btn\">Excluir</button>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n        <p v-else>Nenhum agendamento encontrado.</p>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/services/api';\r\nimport AppointmentForm from '@/components/AppointmentForm.vue';\r\n\r\nexport default {\r\n  components: { AppointmentForm },\r\n  data() {\r\n    return {\r\n      appointments: [],\r\n      userRole: 'paciente'\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchAppointments();\r\n  },\r\n  methods: {\r\n    doLogout() {\r\n      localStorage.removeItem('authToken');\r\n      this.$router.push('/login');\r\n    },\r\n    async fetchAppointments() {\r\n      try {\r\n        const response = await api.get('/appointments');\r\n        this.appointments = response.data;\r\n        \r\n        if (this.appointments.length > 0) {\r\n          if (this.appointments[0].pacienteId && this.appointments[0].pacienteId.nome) {\r\n            this.userRole = 'secretario';\r\n          } else {\r\n            this.userRole = 'paciente';\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erro ao buscar agendamentos:\", error);\r\n        this.doLogout();\r\n      }\r\n    },\r\n    async deleteAppointment(id) {\r\n      if (confirm('Tem certeza que deseja excluir este agendamento?')) {\r\n        try {\r\n          await api.delete(`/appointments/${id}`);\r\n          alert('Agendamento exclu√≠do com sucesso!');\r\n          this.fetchAppointments();\r\n        } catch (error) {\r\n          alert('Erro ao excluir: ' + error.response.data.error);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* Estilos anteriores */\r\n.dashboard-container { width: 100vw; }\r\n.dashboard-main { max-width: 800px; margin: 0 auto; padding: 100px 20px; box-sizing: border-box;}\r\n.appointments-list ul { list-style: none; padding: 0; }\r\n.appointments-list li { background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }\r\n.app-info { flex-grow: 1; }\r\n.app-actions { display: flex; flex-direction: column; margin-left: 15px; }\r\n.action-btn { padding: 5px 10px; font-size: 0.8em; margin-top: 5px; border-radius: 4px; text-align: center; border: none; cursor: pointer; color: white; text-decoration: none; }\r\n.delete-btn { background-color: #ef4444; }\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAqB;;EACtBA,KAAK,EAAC;AAAkB;;EAI1BA,KAAK,EAAC;AAAgB;;;;;;;;EAMrBA,KAAK,EAAC;AAAmB;;;;;EAInBA,KAAK,EAAC;AAAU;;;;;;EAMhBA,KAAK,EAAC;;;;;;;;uBArBrBC,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJC,mBAAA,CAGS,UAHTC,UAGS,G,0BAFPD,mBAAA,CAAsB,YAAlB,eAAa,qBACjBA,mBAAA,CAAuC;IAA9BE,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,QAAA,IAAAD,QAAA,CAAAC,QAAA,IAAAF,IAAA,CAAQ;KAAE,MAAI,E,GAEhCJ,mBAAA,CAuBO,QAvBPO,UAuBO,GAtBKC,KAAA,CAAAC,QAAQ,qB,cAAlBX,mBAAA,CAA8E,MAAAY,UAAA,EAAzC,sCAAoC,M,cACzEZ,mBAAA,CAAiC,MAAAa,UAAA,EAAtB,mBAAiB,IAE5BC,YAAA,CAAwDC,0BAAA;IAAtCC,gBAAe,EAAET,QAAA,CAAAU;EAAiB,+CAEpDf,mBAAA,CAgBM,OAhBNgB,UAgBM,G,0BAfJhB,mBAAA,CAA8B,YAA1B,uBAAqB,qBACfQ,KAAA,CAAAS,YAAY,CAACC,MAAM,Q,cAA7BpB,mBAAA,CAYK,MAAAqB,UAAA,I,kBAXHrB,mBAAA,CAUKsB,SAAA,QAAAC,WAAA,CAVab,KAAA,CAAAS,YAAY,EAAnBK,GAAG;yBAAdxB,mBAAA,CAUK;MAV4ByB,GAAG,EAAED,GAAG,CAACE;QACxCxB,mBAAA,CAKM,OALNyB,UAKM,GAJUjB,KAAA,CAAAC,QAAQ,qBAAqBa,GAAG,CAACI,UAAU,I,cAAzD5B,mBAAA,CAA2G,UAAA6B,UAAA,G,iBAAhD,YAAU,GAAAC,gBAAA,CAAGN,GAAG,CAACI,UAAU,CAACG,IAAI,kB,0BAAG7B,mBAAA,CAAI,oC,kEAClGA,mBAAA,CAAsB,gBAAd,OAAK,qB,iBAAS,GAAC,GAAA4B,gBAAA,KAAOE,IAAI,CAACR,GAAG,CAACS,IAAI,EAAEC,cAAc;MAAAC,SAAA;MAAAC,SAAA;IAAA,MAAwD,GAAC,iB,0BAAAlC,mBAAA,CAAI,qC,0BACxHA,mBAAA,CAA2B,gBAAnB,YAAU,qB,iBAAS,GAAC,GAAA4B,gBAAA,CAAGN,GAAG,CAACa,SAAS,IAAG,GAAC,iB,0BAAAnC,mBAAA,CAAI,qC,0BACpDA,mBAAA,CAA0B,gBAAlB,WAAS,qB,iBAAS,OAAK,GAAA4B,gBAAA,CAAGN,GAAG,CAACc,eAAe,iB,GAExB5B,KAAA,CAAAC,QAAQ,qB,cAAvCX,mBAAA,CAEM,OAFNuC,WAEM,GADJrC,mBAAA,CAA0F;MAAjFE,OAAK,EAAAoC,MAAA,IAAEjC,QAAA,CAAAkC,iBAAiB,CAACjB,GAAG,CAACE,GAAG;MAAG3B,KAAK,EAAC;OAAwB,SAAO,iBAAA2C,WAAA,E;qDAIvF1C,mBAAA,CAA4C,KAAA2C,WAAA,EAAlC,gCAA8B,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}